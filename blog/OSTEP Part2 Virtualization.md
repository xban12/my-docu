---
tags: [操作系统]
---



## 进程的抽象



关键问题：如何提供多个CPU的幻觉？

- OS 在时间上会将 CPU 共享到多个进程
- 规划器会挑选将会在CPU上执行的进程
  - 挑选规则
  - 上下文转换机制



进程的组成

- PID
- image
  - 静态的代码和数据
  - 动态的栈和堆
- CPU 上下文存储在寄存器
  - PC
  - 操作数
  - 栈指针
- 文件描述器
  - STDIO



进程的创建

- 分配内存和创建镜像
- 打开基础文件
- 初始化CPU寄存器



状态

- 运行中
- 准备
- 阻塞
- 新创建
- 死亡



状态转换



数据结构

- OS 维护一个数据结构来存储所有进程
- 进程的信息被存储在 PCB 中



## 系统调用与进程管理



API

- 给用户提供写程序的函数
- 操作系统题提供的 API 允许进行一些系统调用
  - 高特权
  - 敏感行为
  - 一些阻塞操作



是否可以重写 OS 的程序

- POSIX API：OS 必须要实现的
- 程序语言会隐藏系统调用的细节



和系统调用有关的进程

- `fork()`
  - fork 以后马上开始独立运行，返回不同的值
  - 使用不同的内存
  - 等子进程结束
- `exec()`
- `wait()`
- `exit()`



 
