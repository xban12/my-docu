---
tags: [知识点记录, CSAPP]
---


> 条件，指令的顺序是根据什么控制的呢？

### 指令与条件码

- ALU会根据运算结果设定**条件码寄存器**
- CZSO 进位、零、符号、溢出，分别为前两位和后两位
- 不同的指令会对条件码有不同的影响，其中 `TEST` 和 `CMP`指令比较特殊，它们只更新条件码寄存器的值，不更新目标寄存器的值。
- 在实际的大小比较中我们要用到 `SETE`和 `SETL` 等指令，他们的作用是根据条件码寄存器来设定寄存器的值，以保存条件判断的结果
   - 小于可以通过 “溢出”和“符号”的条件异或和的结果来判断
   - 类似地，可以用条件码的逻辑组合做出任何判断

### 跳转和循环
> 理解汇编代码就是机器语言的不同程度的优化，仔细研究汇编代码可以发现编译器的聪明之处


- 数据的条件转移代替控制的条件转移，条件传送代替跳转效率会更高
   - 现代处理器主要通过流水线分支预测来获得高性能的，会对条件跳转指令进行预测，错误预测会浪费大量时间。
   - 分支预测：程序在还没运行前就根据代码猜测可能会运行哪些分支

- 循环的实现：条件测试 + 跳转

- switch 通过跳转表处理多重分支使得跳转效率高
   - 跳转表即存代码位置地址的一个数组
   - 代码量更少，比较次数少，一次比较查表跳转
